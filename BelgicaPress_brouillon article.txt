Le corpus contient 83854 requêtes (52547 différentes si on facette by text). Elles reprsénetent 154216 tokens et 32519 types "uniques" (erreurs de graphie mises à part). Les queries contiennent de 1 à 64 tokens, avec une moyenne de 1.8, une médiane de 2 et un écart type de 1.08.

Ces queries représentent 29812 visites, qui vont de 1 à 107 requêtes, avec une médiane de 1, une moyenne de 2.87 et un écart type de 4.1. Le 95 percentile est de 9 -> une quarantaine d'outliers évidents (jusqu'à 71, 72, 78, 94 et 107 queries par visite)

Nous avons décidé d'examiner un échantillon de 1000 requêtes sélectionnées de manière aléatoire. Après nettoyage des doublons et des requêtes inexploitables (par exemple, constituées essentiellement de chiffres), il restait 995 requêtes réparties en 952 visites.

Annotation

Objectif  :
On essaye de se mettre à la place de l'utilisateur et, sur base des requêtes effectuées lors de la visite, on essaye de comprendre ce qu'il cherchait, en se limitant aux noms de lieux et de personnes.

Catégories :
loc : n'importe quel lieu au sens "emplacement géographique", ou nom mal orthographié qui semble correspondre à un lieu, que ce soit un nom de commune, de pays, de station de métro (Horta Station)
per : nom complet ou prénom.
per_loc: quand il est difficile de trancher entre person et loc ("Dhuy", "général Jacques")
per_ambig : cela ressemble vaguement à un nom de personne et aucun lieu ne semble porter ce nom ("Tombek")
ambig : il pourrait s'agir d'une entité nommées per ou loc, mais peut-être aussi d'un autre type ou d'un nom commun ("stampe", "valk").

En cas de doute, prendre la catégorie qui revient le plus souvent dans la première page de résultats de Google. Il faut également s'aider des autres requêtes effectuées lors de la même visite. La requête "hocelart" serait incompréhensible si l'on ne voyait pas à l'examen de ses autres requêtes que l'utilisateur a en fait essayé  toutes les orthographes d'Hoeylaart...

Règles :
Pas de chevauchement d'annotations : "Auguste van Turnhout" est manifestement un nom complet, aussi on l'annote comme tel sans annoter "Turnhout" comme LOC.

Au terme de l'opération, effectuée dans le logiciel d'annotation UAM Corpus Tool, j'obtiens un XML que je repasse dans Open Refine.
C'est là que je procédérai manuellement aux nettoyages, coreections et enrichissement. A noter qu'ils'agit d'une opérations manuelle, même si je m'aide de Wikidata ou geonames pour retrouver plus vite la région d'une localité et autres informations pertinentes. 

Les 995 queries ont été annotées par deux des auteurs. Au terme de l'opération, les divérgences d'opinion ont été débattues dans l'optique de trouver un consensus. Lorsqu'aucun consensus n'a pu être obtenu, chaque auteur a conservé son annotation initiale. Par exemple, l'un des auteurs a annoté la requête "Lambeaux Horta" comme un lieux ("le pavillon Horta-Lambeaux" dans le Parc du Cinquantenaire à Bruxelles), tandis que l'autre y a vu les patronymes juxtaposés du sculpteur et de l'architecte belge. 

Statistiques échantillon

Un total de 849 entités (748 types et environ 731 entités différentes - Hoeylaart et Hoiellart en format une seule) ont été annotées selon la répartition suivante (penser à ajouter les pourcentages et leur marge d'erreur) :

		Annot1	Annot2	Consensus
per		485	477	473
loc		317	317	313
per_ambig	18	25	17
per_loc		18	19	16
ambig		10	11	10
(blank)*	1	0	0
				
*L'une des entités ("toots gilde") n'a pas été annotée par l'annotateur 1				
	
Sur 849 entités, 829 (97.6 %) ont donc été classées dans la même catégorie par les deux annotateurs. Malgré quelques dissonances, la méthode de consensus utilisée aboutit donc à un accord inter-annotateurs très important, avec un kappa de Cohen supérieur à 0.96 sur un maximum de 1.
	

Parmi les 313 lieux LOC issus du consensus, 225 (~78 %) sont situés en Belgique, loin devant le République démocratique du Congo (9 %), la France (6 %), les Pays-Bas (5 %) et une quinzaine d'autre pays comptant chacun moins de dix occurences.
		
A ce stade, il est intéressant de noter que les 225 lieux belges se répartissent à 86 % en noms de communes et sections de communes (presque moitié-moitié : 99 sections et 96 communes sur 225), le reste étant des "Points of Interest" tels que "église Saint-Paul" (10.6 %), des noms de sous-régions et de provinces, de forêts et de rivières, etc. 

En nous concentrant sur les noms de communes/"villages" belges, nous couvrons donc 62 % du total des noms de lieux cités dans l'échantillon de requêtes, tous pays confondus. Sur l'ensemble du corpus, nous devrions donc avoir 95 % de chances de couvrir entre 56 et 68 % de l'ensemble des lieux cités.

Performance des deux extracteurs

Parmi les 516 noms de personnes issus de l'annotation consensuelle (PER, PER_LOC et PER_AMBIG confondus), nous en avons annotés 141 (27.3 %) avec la mention "identifiant complet", ce qui signifie qu'ils contiennent une combinaison prenom + nom de famille permettant en théorie d'identifier une personne précise.

Le script Python a identifié quant à lui 178 "noms complets", dont 131 sur les 141 ainsi annotés (les 10 manquants ont été plus ou moins extraits, mais de manière erronée, comme "van loo prosper" devenu "loo prosper". Un autre type problème survient lorsque une seule requête juxtapose deux noms de personnes, par exemple "Victor Hugo Albert Einstein"). 

Nous avons donc un rappel (R) de 92.9 %, une précision (P) de 73.6 % et un F1 score de 82,1 %, du moins pour les noms complets dans cet échantillon.

S'agissant des noms de lieux belges, le second script Python en a reconnu correctement 183 sur 225 (R=, P=), mais 180 sur 195 s'agissant des noms de communes/sections (R=, P=). Dans ce dernier cas, les principales omissions sont dues à des abbréviations ("wez" plutôt que "Wez-Velvain") ou à une orthographe approximative ("atwerpen" pour "Antwerpen"), voire à peine reconnaissable ("overysschf" pour "Overijse"). Afin d'éviter un excès de fausses reconnaissances, ainsi que pour limiter le temps de calcul, nous avons en effet renoncé à introduire dans les deux scripts un algorithme de fuzzy matching, préférant nous fier à la longue liste de graphies alternatives qu'offrent les listes (gazeeters) sur lesquelles les scripts se basent.







